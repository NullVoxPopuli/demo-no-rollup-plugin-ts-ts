{"version":3,"file":"template-compiler-node.js","sourceRoot":"","sources":["template-compiler-node.ts"],"names":[],"mappings":";;;AACA,+BAA4B;AAI5B,iFAAiE;AACjE,yEAA8D;AAU9D,MAAa,oBAAqB,SAAQ,2CAAgB;IACxD,YAAmB,MAAkC;QACnD,KAAK,CAAC;YACJ,yBAAyB,EAAE,GAAG,EAAE,CAAC,IAAA,8CAAe,EAAC,MAAM,CAAC,YAAY,CAAC;YACrE,QAAQ,EAAE,MAAM,CAAC,QAAQ;YACzB,QAAQ,EAAE,MAAM,CAAC,QAAQ;YACzB,OAAO,EAAE,MAAM,CAAC,OAAO;SACxB,CAAC,CAAC;QANc,WAAM,GAAN,MAAM,CAA4B;IAOrD,CAAC;IAED,4EAA4E;IAC5E,cAAc;IACd,2BAA2B;QACzB,OAAO;YACL,IAAA,WAAI,EAAC,SAAS,EAAE,wCAAwC,CAAC;YACzD;gBACE,gBAAgB,EAAE,IAAI,CAAC,MAAM;aACT;SACvB,CAAC;IACJ,CAAC;IAED,OAAO;QACL,OAAO,IAAA,WAAI,EAAC,SAAS,EAAE,IAAI,CAAC,CAAC;IAC/B,CAAC;CACF;AAxBD,oDAwBC","sourcesContent":["import { Resolver } from './resolver';\nimport { join } from 'path';\nimport { PluginItem } from '@babel/core';\nimport type { Params as InlineBabelParams } from './babel-plugin-stage1-inline-hbs-node';\nimport { Plugins } from './ember-template-compiler-types';\nimport { getEmberExports } from './load-ember-template-compiler';\nimport { TemplateCompiler } from './template-compiler-common';\n\nexport interface NodeTemplateCompilerParams {\n  compilerPath: string;\n  compilerChecksum: string;\n  resolver?: Resolver;\n  EmberENV: unknown;\n  plugins: Plugins;\n}\n\nexport class NodeTemplateCompiler extends TemplateCompiler {\n  constructor(public params: NodeTemplateCompilerParams) {\n    super({\n      loadEmberTemplateCompiler: () => getEmberExports(params.compilerPath),\n      resolver: params.resolver,\n      EmberENV: params.EmberENV,\n      plugins: params.plugins,\n    });\n  }\n\n  // Use applyTransforms on the contents of inline hbs template strings inside\n  // Javascript.\n  inlineTransformsBabelPlugin(): PluginItem {\n    return [\n      join(__dirname, 'babel-plugin-stage1-inline-hbs-node.js'),\n      {\n        templateCompiler: this.params,\n      } as InlineBabelParams,\n    ];\n  }\n\n  baseDir() {\n    return join(__dirname, '..');\n  }\n}\n"]}